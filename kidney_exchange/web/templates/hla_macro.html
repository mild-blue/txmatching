{% macro render_hla(patient, code_prefix, matching_antigens, show_header) %}

<table>
    {% if show_header %}
    <tr class="anti-header">
        <td>Antigens</td>
        {% if patient.is_recipient and patient.parameters.hla_antibodies.codes|length > 0 %}
            <td>Antibodies</td>
        {% endif %}
    </tr>
    {% endif %}
    <tr>
        <td>
            {% for code in patient.parameters.hla_antigens.codes %}
                {% if code.startswith(code_prefix) %}
                    {% set matched_antigen_class = "matching-antigens" if code in matching_antigens else "" %}
                    <span class="inline_code {{ matched_antigen_class }}">{{ code }}</span>
                {% endif %}
            {% endfor %}
        </td>
        {% if patient.is_recipient and patient.parameters.hla_antibodies.codes|length > 0 %}
        <td>
            {% for code in patient.parameters.hla_antibodies.codes %}
                {% if code.startswith(code_prefix) %}
                    <span class="inline_code_blue">{{ code }}</span>
                {% endif %}
            {% endfor %}
        </td>
        {% endif %}
    </tr>
</table>

{% endmacro %}
