<app-header [user]="user"
            [downloadStatus]="downloadStatus"
            [uploadStatus]="uploadStatus"
            (downloadAction)="downloadReport()"
            (uploadAction)="uploadPatients()"
            [txmEvents]="txmEvents"
            [defaultTxmEvent]="defaultTxmEvent"
            (defaultTxmEventSelected)="setDefaultTxmEvent($event)"></app-header>

<section class="home">
  <app-container>
    <div class="home-header">
      <h1>
        Top Matchings
        <app-count *ngIf="!loading"
                   [count]="matchings.length"
                   [maxCount]="foundMatchingsCount"
                   title="Top matchings / Total number of matchings">
        </app-count>
      </h1>
      <button (click)="toggleConfiguration()"
              *ngIf="showConfiguration"
              class="config">
        Configure
        <fa-icon [icon]="configIcon"></fa-icon>
      </button>
    </div>
  </app-container>

  <app-configuration (configClosed)="toggleConfiguration()"
                     *ngIf="showConfiguration"
                     [configuration]="configuration"
                     [isOpened]="configOpened"
                     [patients]="patients"
                     (configSubmitted)="calculate($event)"
  ></app-configuration>

  <app-content>
    <h3 *ngIf="!loading && matchings.length === 0">No matchings were found.<br>Try to change settings and recalculate.</h3>
    <app-item-list *ngIf="!loading && matchings.length"
                   [items]="matchings"
                   [configuration]="appConfiguration"
                   [patients]="patients"></app-item-list>
  </app-content>

</section>

<app-alert></app-alert>
<app-loading [show]="loading"></app-loading>
