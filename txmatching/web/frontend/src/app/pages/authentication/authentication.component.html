<div class="authentication">
  <div class="content">
    <button routerLink="/login">
      <mat-icon>keyboard_backspace</mat-icon>
      <span>Back to login</span>
    </button>

    <div class="form">
      <h3>Enter a verification code</h3>
      <p>A text message with a verification code was sent to your mobile phone.</p>
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <mat-form-field>
          <mat-label>Verification code</mat-label>
          <input matInput type="text" placeholder="Enter a code from SMS" formControlName="input" />
        </mat-form-field>
        <ng-container
          *ngTemplateOutlet="!success ? defaultButton : verifiedButton; context: { loading: loading }"
        ></ng-container>
      </form>
    </div>
  </div>
</div>

<app-alert></app-alert>

<ng-template #defaultButton let-loading="loading">
  <app-button type="submit" [loading]="loading"> Verify </app-button>
</ng-template>

<ng-template #verifiedButton>
  <app-button type="submit" [variant]="'success'" [success]="true"> Verified </app-button>
  <p class="loading">Redirecting to homepage</p>
</ng-template>
