{
    "swagger": "2.0",
    "basePath": "/",
    "paths": {
        "/v1/public/patient-upload": {
            "put": {
                "responses": {
                    "500": {
                        "description": "Unexpected error, see contents for details.",
                        "schema": {
                            "$ref": "#/definitions/FailResponse"
                        }
                    },
                    "403": {
                        "description": "Access denied. You do not have rights to access this endpoint.",
                        "schema": {
                            "$ref": "#/definitions/FailResponse"
                        }
                    },
                    "401": {
                        "description": "Authentication failed.",
                        "schema": {
                            "$ref": "#/definitions/FailResponse"
                        }
                    },
                    "400": {
                        "description": "Wrong data format.",
                        "schema": {
                            "$ref": "#/definitions/FailResponse"
                        }
                    },
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/PatientUploadSuccessResponse"
                        }
                    }
                },
                "description": "This endpoint allows the country editor to upload patient data for given                         TXM event. TXM event name has to be provided by an ADMIN. You can either add patients to the                         current dataset or remove all patients from respective country in case there were any.",
                "operationId": "put_txm_event_upload_patients",
                "parameters": [
                    {
                        "name": "payload",
                        "required": true,
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/UploadPatients"
                        }
                    }
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ],
                "tags": [
                    "public"
                ]
            }
        }
    },
    "info": {
        "title": "API",
        "version": "1.0"
    },
    "produces": [
        "application/json"
    ],
    "consumes": [
        "application/json"
    ],
    "tags": [
        {
            "name": "public"
        }
    ],
    "definitions": {
        "UploadPatients": {
            "required": [
                "country",
                "donors",
                "recipients",
                "txm_event_name"
            ],
            "properties": {
                "country": {
                    "$ref": "#/definitions/CountryCode"
                },
                "txm_event_name": {
                    "type": "string",
                    "description": "The TXM event name has to be provided by an ADMIN.",
                    "example": "2020-10-example_event"
                },
                "donors": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/DonorInput"
                    }
                },
                "recipients": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/RecipientInput"
                    }
                },
                "add_to_existing_patients": {
                    "type": "boolean",
                    "description": "If *true* the currently uploaded patients will be added to the patients already in the system. If *false* the data in the system will be overwritten by the currently uploaded data.",
                    "default": false
                }
            },
            "type": "object"
        },
        "CountryCode": {
            "enum": [
                "CZE",
                "AUT",
                "ISR",
                "ABW",
                "AFG",
                "AGO",
                "AIA",
                "ALA",
                "ALB",
                "AND",
                "ARE",
                "ARG",
                "ARM",
                "ASM",
                "ATA",
                "ATF",
                "ATG",
                "AUS",
                "AZE",
                "BDI",
                "BEL",
                "BEN",
                "BES",
                "BFA",
                "BGD",
                "BGR",
                "BHR",
                "BHS",
                "BIH",
                "BLM",
                "BLR",
                "BLZ",
                "BMU",
                "BOL",
                "BRA",
                "BRB",
                "BRN",
                "BTN",
                "BVT",
                "BWA",
                "CAF",
                "CAN",
                "CCK",
                "CIV",
                "CMR",
                "COD",
                "COG",
                "COK",
                "COL",
                "COM",
                "CPV",
                "CRI",
                "CUB",
                "CUW",
                "CXR",
                "CYM",
                "CYP",
                "DEU",
                "DJI",
                "DMA",
                "DNK",
                "DOM",
                "DZA",
                "ECU",
                "EGY",
                "ERI",
                "ESH",
                "ESP",
                "EST",
                "ETH",
                "FIN",
                "FJI",
                "FLK",
                "FRA",
                "FRO",
                "FSM",
                "GAB",
                "GBR",
                "GEO",
                "GGY",
                "GHA",
                "GIB",
                "GIN",
                "GLP",
                "GMB",
                "GNB",
                "GNQ",
                "GRC",
                "GRD",
                "GRL",
                "GTM",
                "GUF",
                "GUM",
                "GUY",
                "HKG",
                "HMD",
                "HND",
                "HRV",
                "HTI",
                "HUN",
                "CHE",
                "CHL",
                "CHN",
                "IDN",
                "IMN",
                "IND",
                "IOT",
                "IRL",
                "IRN",
                "IRQ",
                "ISL",
                "ITA",
                "JAM",
                "JEY",
                "JOR",
                "JPN",
                "KAZ",
                "KEN",
                "KGZ",
                "KHM",
                "KIR",
                "KNA",
                "KOR",
                "KWT",
                "LAO",
                "LBN",
                "LBR",
                "LBY",
                "LCA",
                "LIE",
                "LKA",
                "LSO",
                "LTU",
                "LUX",
                "LVA",
                "MAC",
                "MAF",
                "MAR",
                "MCO",
                "MDA",
                "MDG",
                "MDV",
                "MEX",
                "MHL",
                "MKD",
                "MLI",
                "MLT",
                "MMR",
                "MNE",
                "MNG",
                "MNP",
                "MOZ",
                "MRT",
                "MSR",
                "MTQ",
                "MUS",
                "MWI",
                "MYS",
                "MYT",
                "NAM",
                "NCL",
                "NER",
                "NFK",
                "NGA",
                "NIC",
                "NIU",
                "NLD",
                "NOR",
                "NPL",
                "NRU",
                "NZL",
                "OMN",
                "PAK",
                "PAN",
                "PCN",
                "PER",
                "PHL",
                "PLW",
                "PNG",
                "POL",
                "PRI",
                "PRK",
                "PRT",
                "PRY",
                "PSE",
                "PYF",
                "QAT",
                "REU",
                "ROU",
                "RUS",
                "RWA",
                "SAU",
                "SDN",
                "SEN",
                "SGP",
                "SGS",
                "SHN",
                "SJM",
                "SLB",
                "SLE",
                "SLV",
                "SMR",
                "SOM",
                "SPM",
                "SRB",
                "SSD",
                "STP",
                "SUR",
                "SVK",
                "SVN",
                "SWE",
                "SWZ",
                "SXM",
                "SYC",
                "SYR",
                "TCA",
                "TCD",
                "TGO",
                "THA",
                "TJK",
                "TKL",
                "TKM",
                "TLS",
                "TON",
                "TTO",
                "TUN",
                "TUR",
                "TUV",
                "TWN",
                "TZA",
                "UGA",
                "UKR",
                "UMI",
                "URY",
                "USA",
                "UZB",
                "VAT",
                "VCT",
                "VEN",
                "VGB",
                "VIR",
                "VNM",
                "VUT",
                "WLF",
                "WSM",
                "XKX",
                "YEM",
                "ZAF",
                "ZMB",
                "ZWE"
            ],
            "type": "string"
        },
        "DonorInput": {
            "required": [
                "blood_group",
                "donor_type",
                "hla_typing",
                "medical_id"
            ],
            "properties": {
                "medical_id": {
                    "type": "string",
                    "description": "Medical ID of the patient. This ID is unique thorough the system and can be used for the identification of a specific patient in your system. Typically, this is the patient ID used in your internal system.",
                    "example": "D1037"
                },
                "blood_group": {
                    "$ref": "#/definitions/BloodGroupEnum"
                },
                "hla_typing": {
                    "type": "array",
                    "description": "HLA typing of the patient. Use high resolution if available.",
                    "example": [
                        "A1",
                        "A32",
                        "B7",
                        "B51",
                        "DR11",
                        "DR15",
                        "A*02:03",
                        "A*11:01:35",
                        "DPA1*01:07",
                        "DRB4*01:01",
                        "DQB1*02:01:01:01"
                    ],
                    "items": {
                        "type": "string"
                    }
                },
                "donor_type": {
                    "$ref": "#/definitions/DonorType"
                },
                "related_recipient_medical_id": {
                    "type": "string",
                    "description": "Medical ID of the related recipient, empty for bridging and non-directed donors.",
                    "example": "R1037"
                },
                "sex": {
                    "$ref": "#/definitions/SexEnum"
                },
                "height": {
                    "type": "integer",
                    "description": "Height of the patient in centimeters.",
                    "example": 178
                },
                "weight": {
                    "type": "number",
                    "description": "Weight of the patient in kilograms.",
                    "example": 78.4
                },
                "year_of_birth": {
                    "type": "integer",
                    "description": "Year of birth of the patient.",
                    "example": 1945
                },
                "internal_medical_id": {
                    "type": "string",
                    "description": "Custom medical ID that will not be shown in UI, but will be stored and can be seen in patient xlsx export.",
                    "example": "123456"
                }
            },
            "type": "object"
        },
        "BloodGroupEnum": {
            "enum": [
                "A",
                "B",
                "AB",
                "0"
            ],
            "type": "string"
        },
        "DonorType": {
            "enum": [
                "DONOR",
                "BRIDGING_DONOR",
                "NON_DIRECTED"
            ],
            "type": "string",
            "description": "Type of the donor."
        },
        "SexEnum": {
            "enum": [
                "M",
                "F"
            ],
            "type": "string",
            "description": "Sex of the patient."
        },
        "RecipientInput": {
            "required": [
                "blood_group",
                "hla_antibodies",
                "hla_typing",
                "medical_id"
            ],
            "properties": {
                "hla_antibodies": {
                    "type": "array",
                    "description": "Detected HLA antibodies of the patient. Use high resolution                                   if available. If high resolution is provided it is assumed that all tested antibodies were provided. If not it is assumed that either all or just positive ones were.",
                    "items": {
                        "$ref": "#/definitions/HLAAntibodyIn"
                    }
                },
                "acceptable_blood_groups": {
                    "type": "array",
                    "description": "Acceptable blood groups for the patient. Leave empty to use                                             compatible blood groups.",
                    "example": [
                        "A",
                        "0"
                    ],
                    "items": {
                        "$ref": "#/definitions/BloodGroupEnum"
                    }
                },
                "medical_id": {
                    "type": "string",
                    "description": "Medical ID of the patient. This ID is unique thorough the system and can be used for the identification of a specific patient in your system. Typically, this is the patient ID used in your internal system.",
                    "example": "R1037"
                },
                "blood_group": {
                    "$ref": "#/definitions/BloodGroupEnum"
                },
                "hla_typing": {
                    "type": "array",
                    "description": "HLA typing of the patient. Use high resolution if available.",
                    "example": [
                        "A1",
                        "A32",
                        "B7",
                        "B51",
                        "DR11",
                        "DR15",
                        "A*02:03",
                        "A*11:01:35",
                        "DPA1*01:07",
                        "DRB4*01:01",
                        "DQB1*02:01:01:01"
                    ],
                    "items": {
                        "type": "string"
                    }
                },
                "sex": {
                    "$ref": "#/definitions/SexEnum"
                },
                "height": {
                    "type": "integer",
                    "description": "Height of the patient in centimeters.",
                    "example": 178
                },
                "weight": {
                    "type": "number",
                    "description": "Weight of the patient in kilograms.",
                    "example": 78.4
                },
                "year_of_birth": {
                    "type": "integer",
                    "description": "Year of birth of the patient.",
                    "example": 1945
                },
                "waiting_since": {
                    "type": "string",
                    "format": "date",
                    "description": "Date since when the patient has been on waiting list. Use format YYYY-MM-DD.",
                    "example": "2015-01-17"
                },
                "previous_transplants": {
                    "type": "integer",
                    "description": "Number of previous kidney transplants."
                },
                "internal_medical_id": {
                    "type": "string",
                    "description": "Custom medical ID that will not be shown in UI, but will be stored and can be seen in patient xlsx export.",
                    "example": "123456"
                }
            },
            "type": "object"
        },
        "HLAAntibodyIn": {
            "required": [
                "cutoff",
                "mfi",
                "name"
            ],
            "properties": {
                "name": {
                    "type": "string",
                    "description": "HLA antibody name in high (A\\*01:01), low (A\\*01), split (A1) or broad (A9) resolutions. In case of DP or DQ, when alpha and beta are provided, the expected format is DQ[01:01,02:02]",
                    "example": "A*01:01"
                },
                "mfi": {
                    "type": "integer",
                    "description": "Mean fluorescence intensity. Use exact value.",
                    "example": 2350
                },
                "cutoff": {
                    "type": "integer",
                    "description": "Default cutoff value for the specific patient and HLA antibody.",
                    "example": 2000
                }
            },
            "type": "object"
        },
        "FailResponse": {
            "required": [
                "error"
            ],
            "properties": {
                "error": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "PatientUploadSuccessResponse": {
            "required": [
                "donors_uploaded",
                "recipients_uploaded"
            ],
            "properties": {
                "recipients_uploaded": {
                    "type": "integer",
                    "description": "Number of recipients successfully loaded into the application."
                },
                "donors_uploaded": {
                    "type": "integer",
                    "description": "Number of donors successfully loaded into the application."
                }
            },
            "type": "object"
        }
    },
    "responses": {
        "ParseError": {
            "description": "When a mask can't be parsed"
        },
        "MaskError": {
            "description": "When any error occurs on mask"
        },
        "SolverAlreadyRunningException": {
            "description": "Solver already running"
        },
        "InvalidJWTException": {
            "description": "invalid_jwt_exception"
        },
        "NotFoundException": {
            "description": "not_found_exception"
        },
        "CredentialsMismatchException": {
            "description": "credentials_mismatch_exception"
        },
        "InvalidOtpException": {
            "description": "invalid_otp_exception"
        },
        "CouldNotSendOtpUsingSmsServiceException": {
            "description": "could_not_send_otp"
        },
        "InvalidIpAddressAccessException": {
            "description": "invalid_ip_exception"
        },
        "UserUpdateException": {
            "description": "user_update_exception"
        },
        "InvalidAuthCallException": {
            "description": "invalid_auth_call_exception"
        },
        "GuardException": {
            "description": "guard_exception"
        },
        "WrongTokenUsedException": {
            "description": "wrong_used_token_exception"
        },
        "AuthenticationException": {
            "description": "general_authentication_exception"
        },
        "InvalidArgumentException": {
            "description": "invalid_argument_exception"
        },
        "UnauthorizedException": {
            "description": "unauthorized_exception"
        },
        "TooComplicatedDataForAllSolutionsSolver": {
            "description": "too complicated data for solver _exception"
        },
        "CannotFindShortEnoughRoundsOrPathsInILPSolver": {
            "description": "too complicated data for solver _exception"
        },
        "DaciteError": {
            "description": "dacite_exception"
        },
        "KeyError": {
            "description": "key_error"
        },
        "ValueError": {
            "description": "value_error"
        },
        "Forbidden": {
            "description": "access_denied"
        },
        "HTTPException": {
            "description": "http_exception"
        },
        "Exception": {
            "description": "default_exception_error"
        }
    }
}